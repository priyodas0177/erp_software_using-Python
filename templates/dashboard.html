<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Dashboard{% endblock %}</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      background: #f4f6f9;
      margin: 0;
      padding: 0;
    }

    .header{
      background: #2c3e50;
      color: white;
      padding: 30px 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h2{
      margin: 0;
      font-size: 22px;
      font-weight: 600;
    }

    .header a {
      color: #fff;
      text-decoration: none;
      font-size: 15px;
    }

    .layout{
      display: flex;
    }

    .sidebar{
      width: 200px;
      min-height: calc(100vh - 90px);
      background: #11161d;
      color: #e8eef7;
      padding: 14px 10px;
    }

    .content{
      flex: 1;
      padding: 30px;
    }

    .divider{
      height: 1px;
      background: rgba(255,255,255,0.12);
      margin: 10px 6px;
    }

    .group{ margin: 2px 0; }
    .group > summary{ list-style: none; }
    .group > summary::-webkit-details-marker{ display:none; }

    .group-title{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 8px;
      cursor:pointer;
      font-weight: 700;
      color: #f3f6fb;
    }

    .group-title:hover{ background: rgba(255,255,255,0.06); }

    .chev{
      width: 10px;
      height: 10px;
      border-right: 2px solid rgba(255,255,255,0.65);
      border-bottom: 2px solid rgba(255,255,255,0.65);
      transform: rotate(-45deg);
      transition: transform .18s ease;
    }

    .group[open] .chev{ transform: rotate(45deg); }

    .sub{
      display:flex;
      flex-direction:column;
      padding: 2px 0 10px 34px;
    }

    .sub-link{
      color:#cbd6e3;
      text-decoration:none;
      font-size:14px;
      padding: 8px 10px;
      border-radius: 8px;
    }

    .sub-link:hover{
      background: rgba(255,255,255,0.06);
      color:#ffffff;
    }
    /* Center helper */
  .center-wrap{
    width: 100%;
    min-height: calc(100vh - 90px); /* header height */
    display: flex;
    justify-content: center;   /* horizontal center */
    align-items: flex-start;   /* keep a bit top like screenshot */
    padding-top: 60px;
    box-sizing: border-box;
  }

    
  </style>

  {% block extra_css %}{% endblock %}
</head>

<body>

  <div class="header">
    <h2>Welcome {{ display_name }}</h2>
    <h2>Learning Code</h2>
    <a href="{{ url_for('logout') }}">Logout</a>
  </div>

  <div class="layout">

    <aside class="sidebar">
      <div class="divider"></div>

      <details class="group" open>
        <summary class="group-title">
          <span class="chev"></span>
          <span>Personal</span>
        </summary>
        <nav class="sub">
          <a class="sub-link" href="/dashboard">Dashboard</a>
          <a class="sub-link" href="{{url_for('show_users')}}">Personal Information</a>
          <a class="sub-link" href="{{url_for('attendance')}}">Daily Attendance</a>
          <a class="sub-link" href="#">Food</a>
          <a class="sub-link" href="#">Salary Statment</a>
          <a class="sub-link" href="#">Leave Application</a>
          <a class="sub-link" href="#">Movement</a>
        </nav>
      </details>

      {% set show_user_details =
          has_permission("create_user")
          or has_permission("view_users")
          or has_permission("update_user")
          or has_permission("user_status")
          or has_permission("forget_password")
          or has_permission("delete_user")
      %}

      {% if show_user_details %}
      <details class="group">
        <summary class="group-title">
          <span class="chev"></span>
          <span>User Details</span>
        </summary>
        <nav class="sub">
          {% if has_permission("create_user") %}
            <a class="sub-link" href="{{url_for('create_user')}}">Create user</a>
          {% endif %}

          {% if has_permission("update_user") %}
            <a class="sub-link" href="{{ url_for('update_user') }}">Update user</a>
          {% endif %}

          <!-- {% if has_permission("user_status") %}
            <a class="sub-link" href="#">User Status</a>
          {% endif %} -->

          {% if has_permission("forget_password") %}
            <a class="sub-link" href="#">Forget Password</a>
          {% endif %}

          {% if has_permission("delete_user") %}
            <a class="sub-link" href="#">Delete user</a>
          {% endif %}
        </nav>
      </details>
      {% endif %}

        
      {% if has_permission("give_permission") %}
      <details class="group" open>
        <summary class="group-title">
          <span class="chev"></span>
          <span>Permission</span>
        </summary>
        <nav class="sub">
          {% if has_permission("give_permission") %}
            <a class="sub-link" href="{{ url_for('search_user') }}">Give Permission</a>
          {% endif %}
        </nav>
      </details>
      {% endif %}
    </aside>

    <main class="content">
      {% block content %}{% endblock %}
    </main>

  </div>
</body>
</html>
