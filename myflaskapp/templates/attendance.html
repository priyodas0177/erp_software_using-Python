

{% extends "dashboard.html" %}
{% block title %}Daily Attendance{% endblock %}

{% block content %}

<div style="max-width:1000px; margin:20px auto; background:#ffffff; padding:20px; border-radius:12px; box-shadow:0 4px 14px rgba(0,0,0,0.08);">

    <h2 style="margin-top:0;">Daily Attendance</h2>

    <table style="width:100%; border-collapse:collapse;">
        <thead>
            <tr style="background:#f4f6f9;">
                <th style="padding:10px; border-bottom:1px solid #ddd;">User ID</th>
                <th style="padding:10px; border-bottom:1px solid #ddd;">Date</th>
                <th style="padding:10px; border-bottom:1px solid #ddd;">In Time</th>
                <th style="padding:10px; border-bottom:1px solid #ddd;">Out Time</th>
                <th style="padding:10px; border-bottom:1px solid #ddd;">Stay (Minutes)</th>
                <th style="padding:10px; border-bottom:1px solid #ddd;">Status</th>
                <th style="padding:10px; border-bottom:1px solid #ddd;">Remarks</th>
            </tr>
        </thead>

        <tbody>
            {% if rows %}
                {% for row in rows %}
                <tr>
                    <!-- user_id -->
                    <td style="padding:10px; border-bottom:1px solid #eee;">
                        {{ row[0] }}
                    </td>

                    <!-- att_date -->
                    <td style="padding:10px; border-bottom:1px solid #eee;">
                        {{ row[1] }}
                    </td>

                    <!-- in_time (show only time) -->
                    <td style="padding:10px; border-bottom:1px solid #eee;">
                        {{ row[2].strftime("%H:%M:%S") if row[2] else "-" }}
                    </td>

                    <!-- out_time (show only time) -->
                    <td style="padding:10px; border-bottom:1px solid #eee;">
                        {{ row[3].strftime("%H:%M:%S") if row[3] else "-" }}
                    </td>

                    <!-- stay_minutes -->
                    <td>
                        {% if row[4] %}
                            {% set hours = row[4] // 60 %}
                            {% set minutes = row[4] % 60 %}
                            {{ hours }}h {{ minutes }}m
                        {% else %}
                            -
                        {% endif %}
                    </td>


                    <!-- status -->
                    <td style="padding:10px; border-bottom:1px solid #eee;">
                        {% if row[5]|lower == "present" %}
                            <span style="color:green; font-weight:bold;">Present</span>
                        {% else %}
                            <span style="color:red; font-weight:bold;">Absent</span>
                        {% endif %}
                    </td>

                    <!-- remarks -->
                    <td style="padding:10px; border-bottom:1px solid #eee;">
                        {{ row[6] if row[6] else "-" }}
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="7" style="padding:15px; text-align:center;">
                        No attendance records found.
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>

</div>

{% endblock %}

